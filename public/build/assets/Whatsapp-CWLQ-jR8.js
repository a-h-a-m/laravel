import{r as n,a as o,R as e,L as f}from"./app-Bb20fhLa.js";import{S as E}from"./SectionHeader-C3FUvTEv.js";import{R as S}from"./Row-BlIcgtVr.js";function v({waApiKey:d,waDeviceId:g,waAccessToken:k}){const[l,c]=n.useState(null),[s,i]=n.useState(!1),[b,h]=n.useState("https://haspi.appdev.my.id/wa.jpg"),m=()=>{h("https://haspi.appdev.my.id/wa.jpg"),i(!0),o.get(`https://api.chat-wa.com/whatsapp-device/new-session/${g}`,{headers:{Authorization:`Bearer ${k}`}}).then(a=>{i("img"),h(a.data.data.qrCode)})};n.useEffect(()=>{o.get("https://api.chat-wa.com/message/check-number/6285877035941",{headers:{"x-api-key":d}}).then(a=>{if(a.data.success){let u="",p=null;o.post("https://api.chat-wa.com/auth/login",{email:"ahasanmubarok@gmail.com",password:"Aaham729259("}).then(t=>{p=t.data.data.accessToken}).then(t=>{o.get("https://api.chat-wa.com/auth/get-profile",{headers:{Authorization:"Bearer "+p}}).then(r=>{u=r.data.data.devices[0].devicePhone,c("Sistem masih terhubung ke perangkat dengan nomor whatsapp<br/><h3>"+u+"</h3>Apabila Anda ingin menghubungkan ke nomor lain, silakan logout nomor di atas kemudian scan kode QR baru")}).catch(r=>{console.log(r)})}).catch(t=>{console.log(t)})}}).catch(a=>{c("Sepertinya belum ada perangkat terhubung. Silahkan scan kode QR"),m()})},[]);let w=l||"Loading...";return e.createElement(e.Fragment,null,e.createElement(f,{title:"Akun Whatsapp"}),e.createElement(E,{title:"Akun Whatsapp"}),e.createElement("div",{dangerouslySetInnerHTML:{__html:w}}),e.createElement("br",null),s==="img"&&e.createElement("button",{className:"btn btn-warning",onClick:m},"Reload QR Code"),e.createElement(S,null,e.createElement("img",{src:b})),s&&s!=="img"&&e.createElement("div",null,"Waiting for QR Code..."))}export{v as default};
